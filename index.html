<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <title>KPP - 签到领卡牌</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 检查用户是否已登录
            fetch('php/check_login.php')
              .then(response => response.json())
              .then(data => {
                    console.log('登录状态:', data.is_logged_in);
                    console.log('是否为管理员:', data.is_admin);
                    const navLinks = document.querySelector('.nav-links');
                    if (data.is_logged_in) {
                        let navHTML = `
                            <a href="#" class="hover:text-gray-300">搜索卡牌</a>
                            <a href="personal_center.html" class="hover:text-gray-300">个人中心</a>
                            <a href="trading_center.html" class="hover:text-gray-300">交易中心</a>
                            <a href="#" class="hover:text-gray-300"><img src="https://picsum.photos/30/30" alt="头像" class="rounded-full"></a>
                            <a href="php/logout.php" class="hover:text-gray-300">退出登录</a>
                        `;
                        if (data.is_admin) {
                            navHTML = `
                                <a href="#" class="hover:text-gray-300">搜索卡牌</a>
                                <a href="personal_center.html" class="hover:text-gray-300">个人中心</a>
                                <a href="trading_center.html" class="hover:text-gray-300">交易中心</a>
                                <a href="admin_upload.html" class="hover:text-gray-300">添加卡牌</a>
                                <a href="#" class="hover:text-gray-300"><img src="https://picsum.photos/30/30" alt="头像" class="rounded-full"></a>
                                <a href="php/logout.php" class="hover:text-gray-300">退出登录</a>
                            `;
                        }
                        navLinks.innerHTML = navHTML;
                    } else {
                        navLinks.innerHTML = `
                            <a href="#" class="hover:text-gray-300">搜索卡牌</a>
                            <a href="personal_center.html" class="hover:text-gray-300">个人中心</a>
                            <a href="trading_center.html" class="hover:text-gray-300">交易中心</a>
                            <a href="login.html" class="hover:text-gray-300">登录/注册</a>
                        `;
                    }
                })
              .catch(error => {
                    console.error('请求出错:', error);
                });
        });
    </script>
</head>

<body>
    <!-- 菜单栏 -->
    <nav class="bg-gray-800 text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#" class="text-xl font-bold">KPP Logo</a>
            <div class="flex space-x-4 nav-links">
                <!-- 导航链接将根据登录状态动态更新 -->
            </div>
        </div>
    </nav>

    <!-- 签到日历 -->
    <div class="container mx-auto p-4">
        <h2 class="text-2xl font-bold mb-4">签到领卡牌</h2>
        <div class="bg-white p-4 rounded shadow">
            <div id="calendar"></div>
        </div>
    </div>

    <!-- 重磅卡牌展示 -->
    <div class="container mx-auto p-4">
        <h2 class="text-2xl font-bold mb-4">重磅卡牌</h2>
        <div class="grid grid-cols-4 gap-4">
            <div class="bg-white p-4 rounded shadow">
                <img src="https://picsum.photos/200/300" alt="卡牌">
                <h3 class="text-lg font-bold mt-2">卡牌名称</h3>
            </div>
            <div class="bg-white p-4 rounded shadow">
                <img src="https://picsum.photos/200/300" alt="卡牌">
                <h3 class="text-lg font-bold mt-2">卡牌名称</h3>
            </div>
            <div class="bg-white p-4 rounded shadow">
                <img src="https://picsum.photos/200/300" alt="卡牌">
                <h3 class="text-lg font-bold mt-2">卡牌名称</h3>
            </div>
            <div class="bg-white p-4 rounded shadow">
                <img src="https://picsum.photos/200/300" alt="卡牌">
                <h3 class="text-lg font-bold mt-2">卡牌名称</h3>
            </div>
        </div>
    </div>

    <script src="js/calendar.js"></script>
</body>

</html>